import{b as S,u as z,r as o,A as T,j as e}from"./index-D4ATXNzv.js";import{a as E}from"./quizService-DCckhlDd.js";const B=()=>{const{quizId:u}=S(),c=z(),{user:r}=o.useContext(T),x=r==null?void 0:r._id,[n,w]=o.useState(null),[l,g]=o.useState(0),[a,h]=o.useState({}),[i,m]=o.useState(30),[y,j]=o.useState([]),[f,d]=o.useState(null);o.useEffect(()=>{r!==void 0&&(r||c("/login"))},[r,c]),o.useEffect(()=>{(async()=>{try{const s=await E(u);w(s)}catch(s){console.error("Failed to fetch quiz:",s)}})()},[u]),o.useEffect(()=>{i===0&&b();const t=setInterval(()=>{m(s=>s>0?s-1:0)},1e3);return()=>clearInterval(t)},[i]);const N=t=>{h(s=>({...s,[l]:t})),j(s=>[...s,30-i])},v=t=>{d(t?"Correct!":"Incorrect!")},b=()=>{const t=n.questions[l],s=a[l],C=t.options[s]===t.answer;v(C),setTimeout(()=>{d(null),l<n.questions.length-1?(g(Q=>Q+1),m(30)):p()},2e3)},k=()=>{d("Skipped!"),h(t=>({...t,[l]:null})),setTimeout(()=>{d(null),l<n.questions.length-1?(g(t=>t+1),m(30)):p()},2e3)},p=()=>{if(!x){console.error("User not found! Please try again.");return}n==null||n.questions.forEach((t,s)=>{t.options[a[s]],t.answer}),c("/result",{state:{quiz:n,answers:a,timeTaken:y,userId:x}})},q=n?l/n.questions.length*100:0;return e.jsxs("div",{className:"bg-gradient-to-r from-green-300 via-yellow-300 to-green-500 min-h-screen flex flex-col items-center p-4 md:p-6",children:[e.jsx("div",{className:"mb-4 text-center",children:e.jsx("h1",{className:"text-2xl md:text-4xl font-extrabold text-white drop-shadow-lg",children:"Quiz Time!"})}),n?e.jsxs("div",{className:"w-full max-w-3xl bg-white rounded-xl md:rounded-2xl shadow-lg p-4 md:p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 md:h-4",children:e.jsx("div",{className:"bg-blue-500 h-2 md:h-4 rounded-full transition-all duration-500",style:{width:`${q}%`}})}),e.jsxs("p",{className:"text-xs md:text-sm text-gray-600 mt-1",children:["Question ",l+1," of ",n.questions.length]})]}),e.jsxs("div",{className:"mb-6 p-4 md:p-6 border rounded-lg md:rounded-xl bg-gray-50 shadow-md",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-2",children:[e.jsx("h2",{className:"text-lg md:text-2xl font-semibold text-gray-800 flex-1",children:n.questions[l].question}),e.jsxs("span",{className:"bg-red-500 text-white px-3 md:px-4 py-1 md:py-2 text-sm md:text-lg font-bold rounded-full animate-pulse",children:[i,"s"]})]}),e.jsx("div",{className:"space-y-2 md:space-y-4",children:n.questions[l].options.map((t,s)=>e.jsx("div",{onClick:()=>N(s),className:`p-3 md:p-5 border-2 rounded-md md:rounded-lg cursor-pointer transition-all duration-300 text-base md:text-xl font-semibold ${a[l]===s?"bg-blue-600 text-white scale-[1.02] md:scale-105 shadow-md md:shadow-xl border-blue-700":"bg-gray-100 hover:bg-gray-200 border-gray-300"}`,children:t},s))}),f&&e.jsx("div",{className:"mt-4 p-2 md:p-4 bg-green-100 text-green-800 border border-green-300 rounded-lg text-lg md:text-xl font-bold text-center animate-bounce",children:f}),e.jsxs("div",{className:"mt-4 md:mt-6 flex flex-col md:flex-row gap-2 md:gap-0",children:[e.jsx("button",{onClick:k,className:"w-full md:w-1/2 md:mr-2 py-2 md:py-3 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 text-base md:text-xl font-bold",children:"Skip"}),e.jsx("button",{onClick:b,className:"w-full md:w-1/2 md:ml-2 py-2 md:py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-base md:text-xl font-bold",children:l===n.questions.length-1?"Submit":"Next"})]})]})]}):e.jsx("p",{className:"text-center text-lg md:text-2xl font-bold text-white mt-8",children:"Loading quiz..."})]})};export{B as default};
