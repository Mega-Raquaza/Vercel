import{r as o,A as j,d as z,u as A,j as e,a as k}from"./index-D4ATXNzv.js";const v="http://localhost:5000",C=()=>{const{user:d}=o.useContext(j),g=z(),l=A(),{quiz:a,answers:i,timeTaken:x}=g.state||{},r=d?d._id:null;if(o.useEffect(()=>{r||l("/login")},[r,l]),!a||!i||!x)return e.jsx("p",{className:"text-center text-red-500",children:"Invalid Quiz Data"});let u=0;const p=a.questions.length;let c=0;a.questions.map((t,n)=>{const s=t.options[i[n]]===t.answer;return s?(u++,c+=10):c-=5,{question:t.question,selectedAnswer:t.options[i[n]]||"No Answer",correctAnswer:t.answer,isCorrect:s,timeTaken:x[n]||0}});const f=(u/p*100).toFixed(2),[N,b]=o.useState(null),[w,m]=o.useState(!0),[h,S]=o.useState(null);return o.useEffect(()=>{(async()=>{if(!r)return;const n=localStorage.getItem("accessToken");try{const s=await k.post(`${v}/api/users/update-score`,{userId:r,scoreChange:c,quizId:a._id},{headers:{Authorization:`Bearer ${n}`}});b(s.data.updatedScore),m(!1)}catch(s){console.error("Error updating score:",s),S("Failed to update score"),m(!1)}})()},[r,c,a._id]),e.jsxs("div",{className:"max-w-3xl mx-auto p-6 bg-white shadow-md rounded-lg",children:[e.jsx("h1",{className:"text-2xl font-bold text-center mb-4",children:"Quiz Results"}),e.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg mb-6 text-center",children:[e.jsxs("p",{className:"text-lg font-semibold",children:["Score: ",u," / ",p]}),e.jsxs("p",{className:"text-green-600 font-semibold",children:["Accuracy: ",f,"%"]}),w?e.jsx("p",{className:"text-blue-500",children:"Updating score..."}):h?e.jsx("p",{className:"text-red-500",children:h}):e.jsxs("p",{className:"text-green-600",children:["Updated Score: ",N]})]}),e.jsx("button",{onClick:()=>l("/quizzes"),className:"mt-6 w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Go Back to Quizzes"})]})};export{C as default};
