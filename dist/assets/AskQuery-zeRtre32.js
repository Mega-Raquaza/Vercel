import{r as a,A as y,u as f,j as e,a as j}from"./index-D4ATXNzv.js";const v="http://localhost:5000",N=()=>{const{user:r,refreshUserData:m}=a.useContext(y),b=f(),[t,x]=a.useState({title:"",description:"",subject:""}),[o,l]=a.useState(!1),[u,c]=a.useState("");if(!r)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-900 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"User not authenticated"}),e.jsx("p",{className:"mb-4",children:"Please log in to access the League Dashboard."}),e.jsx("button",{onClick:()=>window.location.href="/login",className:"bg-blue-600 px-4 py-2 rounded hover:bg-blue-700",children:"Go to Login"})]});const n=s=>{x({...t,[s.target.name]:s.target.value})},h=async s=>{var d,g,p;if(s.preventDefault(),!r){alert("You must be logged in to ask a question.");return}l(!0),c("");try{await j.post(`${v}/api/queries/ask`,{title:t.title,description:t.description,subject:t.subject,askedBy:r._id,username:r.username},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},withCredentials:!0}),m(),b("/queries")}catch(i){console.error("Error posting query:",((d=i.response)==null?void 0:d.data)||i.message),c(((p=(g=i.response)==null?void 0:g.data)==null?void 0:p.message)||"Something went wrong.")}finally{l(!1)}};return e.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900",children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-white mb-6",children:"Ask a Question"}),e.jsxs("form",{onSubmit:h,className:"max-w-lg mx-auto bg-gray-800 p-6 shadow rounded-xl border border-gray-700",children:[u&&e.jsx("p",{className:"text-red-500 text-center mb-4",children:u}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{list:"subjects",name:"subject",value:t.subject,onChange:n,placeholder:"Select or enter subject",required:!0,className:"w-full p-2 bg-gray-700 border border-gray-600 rounded text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),e.jsxs("datalist",{id:"subjects",children:[e.jsx("option",{value:"Physics"}),e.jsx("option",{value:"Chemistry"}),e.jsx("option",{value:"Mathematics"}),e.jsx("option",{value:"Biology"}),e.jsx("option",{value:"Computer Science"}),e.jsx("option",{value:"Trivia"}),e.jsx("option",{value:"Others"})]})]}),e.jsx("input",{type:"text",name:"title",placeholder:"Enter question title",value:t.title,onChange:n,required:!0,className:"w-full p-2 bg-gray-700 border border-gray-600 rounded mb-4 text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),e.jsx("textarea",{name:"description",placeholder:"Describe your question...",value:t.description,onChange:n,required:!0,className:"w-full p-2 bg-gray-700 border border-gray-600 rounded mb-4 text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:"4"}),e.jsx("button",{type:"submit",disabled:o,className:`w-full py-2 rounded bg-gradient-to-r from-green-600 to-teal-600 text-white font-bold hover:from-green-500 hover:to-teal-500 transition-all ${o?"opacity-50 cursor-not-allowed":""}`,children:o?"Submitting...":"Submit"})]})]})};export{N as default};
